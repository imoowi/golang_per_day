# Kind Kubernetes集群配置文件
# 用于定义Kind集群的网络配置和节点组成

# 集群定义
kind: Cluster # 资源类型：Cluster表示一个Kind集群配置
apiVersion: kind.x-k8s.io/v1alpha4 # Kind API版本

# 网络配置
networking:
  # API Server绑定的地址
  # 0.0.0.0表示监听所有地址
  apiServerAddress: "0.0.0.0"
  # API Server监听的端口
  # 6443是Kubernetes API Server的默认端口
  apiServerPort: 6443

# 节点配置列表
# 定义集群中包含的节点及其配置
nodes:
  # 控制平面节点配置
  - role: control-plane # 节点角色：control-plane(控制平面)节点
    # 额外端口映射：将容器端口映射到主机端口
    # 用于从主机访问集群内部服务
    extraPortMappings:
    - containerPort: 30000 # 容器内部端口：HTTP服务
      hostPort: 80 # 主机端口：外部通过8080访问容器80端口
      protocol: TCP # 端口名称：TCP协议
    - containerPort: 30001 # 容器内部端口：HTTPS服务
      hostPort: 443 # 主机端口：外部通过8443访问容器443端口
      protocol: TCP # 端口名称：TCP协议
  # 工作节点配置
  - role: worker # 节点角色：worker(工作节点)，用于运行应用Pod
  - role: worker # 第二个工作节点，提供更高的计算能力和可用性